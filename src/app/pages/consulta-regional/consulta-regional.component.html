<div class="page-header">
    <div class="page-title">Consulta Regional y Centros</div>
    <div class="page-subtitle">Seguimiento de Metas por Regional y Centro de Formación</div>
</div>

<!-- Filtros -->
<div class="card mb-3">
    <div class="card-body">
        <div class="row">
            <div class="col-3">
            <label class="form-label"><strong>Regional:</strong></label>
            <select class="form-select" [(ngModel)]="regionalSeleccionada" (change)="onRegionalChange()">
                <option *ngFor="let regional of regionales" [value]="regional.codigo">
                [{{ regional.codigo }}] {{ regional.nombre }}
                </option>
            </select>
            </div>
            <div class="col-3">
                <label class="form-label"><strong>Centro:</strong></label>
                <select class="form-select" [(ngModel)]="centroSeleccionado" (change)="onCentroChange()"
                        [disabled]="!centrosDisponibles.length">
                    <option [value]="0">-- Seleccione un centro --</option>
                    <option *ngFor="let centro of centrosDisponibles" [value]="centro.codigo">
                    [{{ centro.codigo }}] {{ centro.nombre }}
                    </option>
                </select>
            </div>
            <div class="col-3">
                <label class="form-label"><strong>Decarga el reporte de la regional seleccionada</strong></label>
                <button
                    class="btn btn-export btn-export-completo"
                    (click)="exportarCompleto()"
                    [disabled]="!datosRegional.length">
                    <i class="fas fa-download"></i>
                    Descargar Reporte
                </button>        
            </div>
        </div>
    </div>
</div>

<!-- Datos en dos columnas -->
<div class="row" *ngIf="datosRegional.length > 0">
    <!-- Columna Regional -->
    <div class="col-6">
    <!-- Información de Regional -->
    <div class="card mb-3 bg-sena">
        <div class="card-body">
        <h5 class="mb-0">
            <i class="fas fa-map-marker-alt"></i>
            Regional: {{ regionalActual?.nombre }}
        </h5>
        </div>
    </div>

    <!-- TABLA 1: Metas Formación Profesional Integral -->
    <div class="card mb-3">
        <div class="card-header bg-light" style="cursor: pointer;" (click)="toggleTabla('formacion')">
        <div class="d-flex justify-content-between align-items-center" [ngClass]="{'table-header-row': tablasExpandidas['formacion']}">
            <div [ngClass]="tablasExpandidas['formacion'] ? 'col-header-concepto' : 'flex-grow-1'">
            <h6 class="mb-0">Metas Formación Profesional Integral</h6>
            </div>
            <div class="col-header-meta text-right" *ngIf="tablasExpandidas['formacion']">
            <h6 class="mb-0">Meta</h6>
            </div>
            <div class="col-header-ejecucion text-right" *ngIf="tablasExpandidas['formacion']">
            <h6 class="mb-0">Ejecución</h6>
            </div>
            <div class="col-header-porcentaje text-right" *ngIf="tablasExpandidas['formacion']">
            <h6 class="mb-0">% Ejecución</h6>
            </div>
            <div class="col-header-chevron">
            <i class="fas" [ngClass]="tablasExpandidas['formacion'] ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
            </div>
        </div>
        </div>
        <div class="card-body p-0" *ngIf="tablasExpandidas['formacion']">
        <div class="table-responsive">
            <table class="table table-sm table-hover mb-0">
            <tbody>
                <tr *ngFor="let item of datosRegional"
                    [class.fila-subtotal]="item.esSubtotal"
                    [class.fila-total]="item.esTotal">
                <td [style.padding-left]="item.indentacion">{{ item.subcategoria }}</td>
                <td class="text-right">{{ item.cupos | number }}</td>
                <td class="text-right">{{ item.ejecucion | number }}</td>
                <td class="text-right">
                    <span class="badge" [ngClass]="getBadgeClass(item.porcentaje)">
                    {{ item.porcentaje | number:'1.2-2' }}%
                    </span>
                </td>
                </tr>
            </tbody>
            </table>
        </div>
        </div>
    </div>

    <!-- TABLA 2: Metas Programas Relevantes -->
    <div class="card mb-3">
        <div class="card-header bg-light" style="cursor: pointer;" (click)="toggleTabla('programas')">
        <div class="d-flex justify-content-between align-items-center" [ngClass]="{'table-header-row': tablasExpandidas['programas']}">
            <div [ngClass]="tablasExpandidas['programas'] ? 'col-header-concepto' : 'flex-grow-1'">
            <h6 class="mb-0">Metas Programas Relevantes</h6>
            </div>
            <div class="col-header-meta text-right" *ngIf="tablasExpandidas['programas']">
            <h6 class="mb-0">Meta</h6>
            </div>
            <div class="col-header-ejecucion text-right" *ngIf="tablasExpandidas['programas']">
            <h6 class="mb-0">Ejecución</h6>
            </div>
            <div class="col-header-porcentaje text-right" *ngIf="tablasExpandidas['programas']">
            <h6 class="mb-0">% Ejecución</h6>
            </div>
            <div class="col-header-chevron">
            <i class="fas" [ngClass]="tablasExpandidas['programas'] ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
            </div>
        </div>
        </div>
        <div class="card-body p-0" *ngIf="tablasExpandidas['programas']">
        <div class="table-responsive">
            <table class="table table-sm table-hover mb-0">
            <tbody>
                <tr *ngFor="let item of datosProgramasRelevantes">
                <td>{{ item.concepto }}</td>
                <td class="text-right">{{ item.meta | number }}</td>
                <td class="text-right">{{ item.ejecucion | number }}</td>
                <td class="text-right">
                    <span class="badge" [ngClass]="getBadgeClass(item.porcentaje)">
                    {{ item.porcentaje | number:'1.2-2' }}%
                    </span>
                </td>
                </tr>
            </tbody>
            </table>
        </div>
        </div>
    </div>

    <!-- TABLA 3: RETENCIÓN -->
    <div class="card mb-3">
        <div class="card-header bg-light" style="cursor: pointer;" (click)="toggleTabla('retencion')">
        <div class="d-flex justify-content-between align-items-center" [ngClass]="{'table-header-row': tablasExpandidas['retencion']}">
            <div [ngClass]="tablasExpandidas['retencion'] ? 'col-header-concepto' : 'flex-grow-1'">
            <h6 class="mb-0">RETENCIÓN</h6>
            </div>
            <div class="col-header-meta text-right" *ngIf="tablasExpandidas['retencion']">
            <h6 class="mb-0">Meta</h6>
            </div>
            <div class="col-header-ejecucion text-right" *ngIf="tablasExpandidas['retencion']">
            <h6 class="mb-0">Ejecución</h6>
            </div>
            <div class="col-header-porcentaje text-right" *ngIf="tablasExpandidas['retencion']">
            <h6 class="mb-0">% Ejecución</h6>
            </div>
            <div class="col-header-chevron">
            <i class="fas" [ngClass]="tablasExpandidas['retencion'] ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
            </div>
        </div>
        </div>
        <div class="card-body p-0" *ngIf="tablasExpandidas['retencion']">
        <div class="table-responsive">
            <table class="table table-sm table-hover mb-0">
            <tbody>
                <tr *ngFor="let item of datosRetencion">
                <td>{{ item.concepto }}</td>
                <td class="text-right">{{ item.meta }}</td>
                <td class="text-right">{{ item.ejecucion }}</td>
                <td class="text-right">
                    <span class="badge" [ngClass]="getBadgeClass(item.porcentaje)">
                    {{ item.porcentaje | number:'1.2-2' }}%
                    </span>
                </td>
                </tr>
            </tbody>
            </table>
        </div>
        </div>
    </div>

    <!-- TABLA 4: CERTIFICACIÓN FORMACIÓN PROFESIONAL -->
    <div class="card mb-3">
        <div class="card-header bg-light" style="cursor: pointer;" (click)="toggleTabla('certificacion')">
        <div class="d-flex justify-content-between align-items-center" [ngClass]="{'table-header-row': tablasExpandidas['certificacion']}">
            <div [ngClass]="tablasExpandidas['certificacion'] ? 'col-header-concepto' : 'flex-grow-1'">
            <h6 class="mb-0">CERTIFICACIÓN FORMACIÓN PROFESIONAL</h6>
            </div>
            <div class="col-header-meta text-right" *ngIf="tablasExpandidas['certificacion']">
            <h6 class="mb-0">Meta</h6>
            </div>
            <div class="col-header-ejecucion text-right" *ngIf="tablasExpandidas['certificacion']">
            <h6 class="mb-0">Ejecución</h6>
            </div>
            <div class="col-header-porcentaje text-right" *ngIf="tablasExpandidas['certificacion']">
            <h6 class="mb-0">% Ejecución</h6>
            </div>
            <div class="col-header-chevron">
            <i class="fas" [ngClass]="tablasExpandidas['certificacion'] ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
            </div>
        </div>
        </div>
        <div class="card-body p-0" *ngIf="tablasExpandidas['certificacion']">
        <div class="table-responsive">
            <table class="table table-sm table-hover mb-0">
            <tbody>
                <tr *ngFor="let item of datosCertificacion">
                <td>{{ item.concepto }}</td>
                <td class="text-right">{{ item.meta | number }}</td>
                <td class="text-right">{{ item.ejecucion | number }}</td>
                <td class="text-right">
                    <span class="badge" [ngClass]="getBadgeClass(item.porcentaje)">
                    {{ item.porcentaje | number:'1.2-2' }}%
                    </span>
                </td>
                </tr>
            </tbody>
            </table>
        </div>
        </div>
    </div>

    <!-- TABLA 5: Certificación de Competencias Laborales -->
    <div class="card mb-3">
        <div class="card-header bg-light" style="cursor: pointer;" (click)="toggleTabla('competencias')">
        <div class="d-flex justify-content-between align-items-center" [ngClass]="{'table-header-row': tablasExpandidas['competencias']}">
            <div [ngClass]="tablasExpandidas['competencias'] ? 'col-header-concepto' : 'flex-grow-1'">
            <h6 class="mb-0">Certificación de Competencias Laborales</h6>
            </div>
            <div class="col-header-meta text-right" *ngIf="tablasExpandidas['competencias']">
            <h6 class="mb-0">Meta</h6>
            </div>
            <div class="col-header-ejecucion text-right" *ngIf="tablasExpandidas['competencias']">
            <h6 class="mb-0">Ejecución</h6>
            </div>
            <div class="col-header-porcentaje text-right" *ngIf="tablasExpandidas['competencias']">
            <h6 class="mb-0">% Ejecución</h6>
            </div>
            <div class="col-header-chevron">
            <i class="fas" [ngClass]="tablasExpandidas['competencias'] ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
            </div>
        </div>
        </div>
        <div class="card-body p-0" *ngIf="tablasExpandidas['competencias']">
        <div class="table-responsive">
            <table class="table table-sm table-hover mb-0">
            <tbody>
                <tr *ngFor="let item of datosCompetenciasLaborales">
                <td>{{ item.concepto }}</td>
                <td class="text-right">{{ item.meta | number }}</td>
                <td class="text-right">{{ item.ejecucion | number }}</td>
                <td class="text-right">
                    <span class="badge" [ngClass]="getBadgeClass(item.porcentaje)">
                    {{ item.porcentaje | number:'1.2-2' }}%
                    </span>
                </td>
                </tr>
            </tbody>
            </table>
        </div>
        </div>
    </div>

    <!-- TABLA 6: POBLACIONES VULNERABLES -->
    <div class="card mb-3">
        <div class="card-header bg-light" style="cursor: pointer;" (click)="toggleTabla('poblaciones')">
        <div class="d-flex justify-content-between align-items-center" [ngClass]="{'table-header-row': tablasExpandidas['poblaciones']}">
            <div [ngClass]="tablasExpandidas['poblaciones'] ? 'col-header-concepto' : 'flex-grow-1'">
            <h6 class="mb-0">POBLACIONES VULNERABLES</h6>
            </div>
            <div class="col-header-meta text-right" *ngIf="tablasExpandidas['poblaciones']">
            <h6 class="mb-0">Meta</h6>
            </div>
            <div class="col-header-ejecucion text-right" *ngIf="tablasExpandidas['poblaciones']">
            <h6 class="mb-0">Ejecución</h6>
            </div>
            <div class="col-header-porcentaje text-right" *ngIf="tablasExpandidas['poblaciones']">
            <h6 class="mb-0">% Ejecución</h6>
            </div>
            <div class="col-header-chevron">
            <i class="fas" [ngClass]="tablasExpandidas['poblaciones'] ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
            </div>
        </div>
        </div>
        <div class="card-body p-0" *ngIf="tablasExpandidas['poblaciones']">
        <div class="table-responsive">
            <table class="table table-sm table-hover mb-0">
            <tbody>
                <tr *ngFor="let item of datosPoblacionesVulnerables">
                <td>{{ item.concepto }}</td>
                <td class="text-right">{{ item.meta | number }}</td>
                <td class="text-right">{{ item.ejecucion | number }}</td>
                <td class="text-right">
                    <span class="badge" [ngClass]="getBadgeClass(item.porcentaje)">
                    {{ item.porcentaje | number:'1.2-2' }}%
                    </span>
                </td>
                </tr>
            </tbody>
            </table>
        </div>
        </div>
    </div>

    <!-- TABLA 7: Desagregación OTRAS POBLACIONES VULNERABLES -->
    <div class="card mb-3">
        <div class="card-header bg-light" style="cursor: pointer;" (click)="toggleTabla('otrasPoblaciones')">
        <div class="d-flex justify-content-between align-items-center" [ngClass]="{'table-header-row': tablasExpandidas['otrasPoblaciones']}">
            <div [ngClass]="tablasExpandidas['otrasPoblaciones'] ? 'col-header-concepto' : 'flex-grow-1'">
            <h6 class="mb-0">Desagregación OTRAS POBLACIONES VULNERABLES</h6>
            </div>
            <div class="col-header-meta text-right" *ngIf="tablasExpandidas['otrasPoblaciones']">
            <h6 class="mb-0">Meta</h6>
            </div>
            <div class="col-header-ejecucion text-right" *ngIf="tablasExpandidas['otrasPoblaciones']">
            <h6 class="mb-0">Ejecución</h6>
            </div>
            <div class="col-header-porcentaje text-right" *ngIf="tablasExpandidas['otrasPoblaciones']">
            <h6 class="mb-0">% Ejecución</h6>
            </div>
            <div class="col-header-chevron">
            <i class="fas" [ngClass]="tablasExpandidas['otrasPoblaciones'] ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
            </div>
        </div>
        </div>
        <div class="card-body p-0" *ngIf="tablasExpandidas['otrasPoblaciones']">
        <div class="table-responsive">
            <table class="table table-sm table-hover mb-0">
            <tbody>
                <tr *ngFor="let item of datosOtrasPoblaciones">
                <td>{{ item.concepto }}</td>
                <td class="text-right">{{ item.meta | number }}</td>
                <td class="text-right">{{ item.ejecucion | number }}</td>
                <td class="text-right">
                    <span class="badge" [ngClass]="getBadgeClass(item.porcentaje)">
                    {{ item.porcentaje | number:'1.2-2' }}%
                    </span>
                </td>
                </tr>
            </tbody>
            </table>
        </div>
        </div>
    </div>

    <!-- TABLA 8: AGENCIA PUBLICA DE EMPLEO -->
    <div class="card mb-3">
        <div class="card-header bg-light" style="cursor: pointer;" (click)="toggleTabla('agencia')">
        <div class="d-flex justify-content-between align-items-center" [ngClass]="{'table-header-row': tablasExpandidas['agencia']}">
            <div [ngClass]="tablasExpandidas['agencia'] ? 'col-header-concepto' : 'flex-grow-1'">
            <h6 class="mb-0">AGENCIA PUBLICA DE EMPLEO</h6>
            </div>
            <div class="col-header-meta text-right" *ngIf="tablasExpandidas['agencia']">
            <h6 class="mb-0">Meta</h6>
            </div>
            <div class="col-header-ejecucion text-right" *ngIf="tablasExpandidas['agencia']">
            <h6 class="mb-0">Ejecución</h6>
            </div>
            <div class="col-header-porcentaje text-right" *ngIf="tablasExpandidas['agencia']">
            <h6 class="mb-0">% Ejecución</h6>
            </div>
            <div class="col-header-chevron">
            <i class="fas" [ngClass]="tablasExpandidas['agencia'] ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
            </div>
        </div>
        </div>
        <div class="card-body p-0" *ngIf="tablasExpandidas['agencia']">
        <div class="table-responsive">
            <table class="table table-sm table-hover mb-0">
            <tbody>
                <tr *ngFor="let item of datosAgenciaEmpleo">
                <td>{{ item.concepto }}</td>
                <td class="text-right">{{ item.meta | number }}</td>
                <td class="text-right">{{ item.ejecucion | number }}</td>
                <td class="text-right">
                    <span class="badge" [ngClass]="getBadgeClass(item.porcentaje)">
                    {{ item.porcentaje | number:'1.2-2' }}%
                    </span>
                </td>
                </tr>
            </tbody>
            </table>
        </div>
        </div>
    </div>

    <!-- TABLA 9: EMPRENDIMIENTO Y FORTALECIMIENTO -->
    <div class="card mb-3">
        <div class="card-header bg-light" style="cursor: pointer;" (click)="toggleTabla('emprendimiento')">
        <div class="d-flex justify-content-between align-items-center" [ngClass]="{'table-header-row': tablasExpandidas['emprendimiento']}">
            <div [ngClass]="tablasExpandidas['emprendimiento'] ? 'col-header-concepto' : 'flex-grow-1'">
            <h6 class="mb-0">EMPRENDIMIENTO Y FORTALECIMIENTO</h6>
            </div>
            <div class="col-header-meta text-right" *ngIf="tablasExpandidas['emprendimiento']">
            <h6 class="mb-0">Meta</h6>
            </div>
            <div class="col-header-ejecucion text-right" *ngIf="tablasExpandidas['emprendimiento']">
            <h6 class="mb-0">Ejecución</h6>
            </div>
            <div class="col-header-porcentaje text-right" *ngIf="tablasExpandidas['emprendimiento']">
            <h6 class="mb-0">% Ejecución</h6>
            </div>
            <div class="col-header-chevron">
            <i class="fas" [ngClass]="tablasExpandidas['emprendimiento'] ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
            </div>
        </div>
        </div>
        <div class="card-body p-0" *ngIf="tablasExpandidas['emprendimiento']">
        <div class="table-responsive">
            <table class="table table-sm table-hover mb-0">
            <tbody>
                <tr *ngFor="let item of datosEmprendimiento">
                <td>{{ item.concepto }}</td>
                <td class="text-right">{{ item.meta | number }}</td>
                <td class="text-right">{{ item.ejecucion | number }}</td>
                <td class="text-right">
                    <span class="badge" [ngClass]="getBadgeClass(item.porcentaje)">
                    {{ item.porcentaje | number:'1.2-2' }}%
                    </span>
                </td>
                </tr>
            </tbody>
            </table>
        </div>
        </div>
    </div>

    <!-- TABLA 10: CONTRATOS DE APRENDIZAJE -->
    <div class="card mb-3">
        <div class="card-header bg-light" style="cursor: pointer;" (click)="toggleTabla('contratos')">
        <div class="d-flex justify-content-between align-items-center" [ngClass]="{'table-header-row': tablasExpandidas['contratos']}">
            <div [ngClass]="tablasExpandidas['contratos'] ? 'col-header-concepto' : 'flex-grow-1'">
            <h6 class="mb-0">CONTRATOS DE APRENDIZAJE</h6>
            </div>
            <div class="col-header-meta text-right" *ngIf="tablasExpandidas['contratos']">
            <h6 class="mb-0">Meta</h6>
            </div>
            <div class="col-header-ejecucion text-right" *ngIf="tablasExpandidas['contratos']">
            <h6 class="mb-0">Ejecución</h6>
            </div>
            <div class="col-header-porcentaje text-right" *ngIf="tablasExpandidas['contratos']">
            <h6 class="mb-0">% Ejecución</h6>
            </div>
            <div class="col-header-chevron">
            <i class="fas" [ngClass]="tablasExpandidas['contratos'] ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
            </div>
        </div>
        </div>
        <div class="card-body p-0" *ngIf="tablasExpandidas['contratos']">
        <div class="table-responsive">
            <table class="table table-sm table-hover mb-0">
            <tbody>
                <tr *ngFor="let item of datosContratosAprendizaje">
                <td>{{ item.concepto }}</td>
                <td class="text-right">{{ item.meta | number }}</td>
                <td class="text-right">{{ item.ejecucion | number }}</td>
                <td class="text-right">
                    <span class="badge" [ngClass]="getBadgeClass(item.porcentaje)">
                    {{ item.porcentaje | number:'1.2-2' }}%
                    </span>
                </td>
                </tr>
            </tbody>
            </table>
        </div>
        </div>
    </div>

    <!-- TABLA 11: CAMPESENA -->
    <div class="card mb-3">
        <div class="card-header bg-light" style="cursor: pointer;" (click)="toggleTabla('campesena')">
        <div class="d-flex justify-content-between align-items-center" [ngClass]="{'table-header-row': tablasExpandidas['campesena']}">
            <div [ngClass]="tablasExpandidas['campesena'] ? 'col-header-concepto' : 'flex-grow-1'">
            <h6 class="mb-0">CAMPESENA</h6>
            </div>
            <div class="col-header-meta text-right" *ngIf="tablasExpandidas['campesena']">
            <h6 class="mb-0">Meta</h6>
            </div>
            <div class="col-header-ejecucion text-right" *ngIf="tablasExpandidas['campesena']">
            <h6 class="mb-0">Ejecución</h6>
            </div>
            <div class="col-header-porcentaje text-right" *ngIf="tablasExpandidas['campesena']">
            <h6 class="mb-0">% Ejecución</h6>
            </div>
            <div class="col-header-chevron">
            <i class="fas" [ngClass]="tablasExpandidas['campesena'] ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
            </div>
        </div>
        </div>
        <div class="card-body p-0" *ngIf="tablasExpandidas['campesena']">
        <div class="table-responsive">
            <table class="table table-sm table-hover mb-0">
            <tbody>
                <tr *ngFor="let item of datosCampesena">
                <td>{{ item.concepto }}</td>
                <td class="text-right">{{ item.meta | number }}</td>
                <td class="text-right">{{ item.ejecucion | number }}</td>
                <td class="text-right">
                    <span class="badge" [ngClass]="getBadgeClass(item.porcentaje)">
                    {{ item.porcentaje | number:'1.2-2' }}%
                    </span>
                </td>
                </tr>
            </tbody>
            </table>
        </div>
        </div>
    </div>

    <!-- TABLA 12: FULL POPULAR -->
    <div class="card mb-3">
        <div class="card-header bg-light" style="cursor: pointer;" (click)="toggleTabla('fullPopular')">
        <div class="d-flex justify-content-between align-items-center" [ngClass]="{'table-header-row': tablasExpandidas['fullPopular']}">
            <div [ngClass]="tablasExpandidas['fullPopular'] ? 'col-header-concepto' : 'flex-grow-1'">
            <h6 class="mb-0">FULL POPULAR</h6>
            </div>
            <div class="col-header-meta text-right" *ngIf="tablasExpandidas['fullPopular']">
            <h6 class="mb-0">Meta</h6>
            </div>
            <div class="col-header-ejecucion text-right" *ngIf="tablasExpandidas['fullPopular']">
            <h6 class="mb-0">Ejecución</h6>
            </div>
            <div class="col-header-porcentaje text-right" *ngIf="tablasExpandidas['fullPopular']">
            <h6 class="mb-0">% Ejecución</h6>
            </div>
            <div class="col-header-chevron">
            <i class="fas" [ngClass]="tablasExpandidas['fullPopular'] ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
            </div>
        </div>
        </div>
        <div class="card-body p-0" *ngIf="tablasExpandidas['fullPopular']">
        <div class="table-responsive">
            <table class="table table-sm table-hover mb-0">
            <tbody>
                <tr *ngFor="let item of datosFullPopular">
                <td>{{ item.concepto }}</td>
                <td class="text-right">{{ item.meta | number }}</td>
                <td class="text-right">{{ item.ejecucion | number }}</td>
                <td class="text-right">
                    <span class="badge" [ngClass]="getBadgeClass(item.porcentaje)">
                    {{ item.porcentaje | number:'1.2-2' }}%
                    </span>
                </td>
                </tr>
            </tbody>
            </table>
        </div>
        </div>
    </div>

    <!-- TABLA 13: Estrategia Formación Continua Especial Campesina (FEEC) -->
    <div class="card mb-3">
        <div class="card-header bg-light" style="cursor: pointer;" (click)="toggleTabla('feec')">
        <div class="d-flex justify-content-between align-items-center" [ngClass]="{'table-header-row': tablasExpandidas['feec']}">
            <div [ngClass]="tablasExpandidas['feec'] ? 'col-header-concepto' : 'flex-grow-1'">
            <h6 class="mb-0">Estrategia FEEC</h6>
            </div>
            <div class="col-header-meta text-right" *ngIf="tablasExpandidas['feec']">
            <h6 class="mb-0">Meta</h6>
            </div>
            <div class="col-header-ejecucion text-right" *ngIf="tablasExpandidas['feec']">
            <h6 class="mb-0">Ejecución</h6>
            </div>
            <div class="col-header-porcentaje text-right" *ngIf="tablasExpandidas['feec']">
            <h6 class="mb-0">% Ejecución</h6>
            </div>
            <div class="col-header-chevron">
            <i class="fas" [ngClass]="tablasExpandidas['feec'] ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
            </div>
        </div>
        </div>
        <div class="card-body p-0" *ngIf="tablasExpandidas['feec']">
        <div class="table-responsive">
            <table class="table table-sm table-hover mb-0">
            <tbody>
                <tr *ngFor="let item of datosFeec">
                <td>{{ item.concepto }}</td>
                <td class="text-right">{{ item.meta | number }}</td>
                <td class="text-right">{{ item.ejecucion | number }}</td>
                <td class="text-right">
                    <span class="badge" [ngClass]="getBadgeClass(item.porcentaje)">
                    {{ item.porcentaje | number:'1.2-2' }}%
                    </span>
                </td>
                </tr>
            </tbody>
            </table>
        </div>
        </div>
    </div>

    <!-- TABLA 14: Metas Primer Curso -->
    <div class="card mb-3">
        <div class="card-header bg-light" style="cursor: pointer;" (click)="toggleTabla('primerCurso')">
        <div class="d-flex justify-content-between align-items-center" [ngClass]="{'table-header-row': tablasExpandidas['primerCurso']}">
            <div [ngClass]="tablasExpandidas['primerCurso'] ? 'col-header-concepto' : 'flex-grow-1'">
            <h6 class="mb-0">Metas Primer Curso</h6>
            </div>
            <div class="col-header-meta text-right" *ngIf="tablasExpandidas['primerCurso']">
            <h6 class="mb-0">Meta</h6>
            </div>
            <div class="col-header-ejecucion text-right" *ngIf="tablasExpandidas['primerCurso']">
            <h6 class="mb-0">Ejecución</h6>
            </div>
            <div class="col-header-porcentaje text-right" *ngIf="tablasExpandidas['primerCurso']">
            <h6 class="mb-0">% Ejecución</h6>
            </div>
            <div class="col-header-chevron">
            <i class="fas" [ngClass]="tablasExpandidas['primerCurso'] ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
            </div>
        </div>
        </div>
        <div class="card-body p-0" *ngIf="tablasExpandidas['primerCurso']">
        <div class="table-responsive">
            <table class="table table-sm table-hover mb-0">
            <tbody>
                <tr *ngFor="let item of datosPrimerCurso">
                <td>{{ item.concepto }}</td>
                <td class="text-right">{{ item.meta | number }}</td>
                <td class="text-right">{{ item.ejecucion | number }}</td>
                <td class="text-right">
                    <span class="badge" [ngClass]="getBadgeClass(item.porcentaje)">
                    {{ item.porcentaje | number:'1.2-2' }}%
                    </span>
                </td>
                </tr>
            </tbody>
            </table>
        </div>
        </div>
    </div>
    </div>

    <!-- Columna Centro -->
    <div class="col-6">
    <!-- Información de Centro -->
    <div class="card mb-3 bg-sena">
        <div class="card-body">
        <h5 class="mb-0">
            <i class="fas fa-building"></i>
            Centro: {{ centroActual?.nombre || 'Seleccione un centro' }}
        </h5>
        </div>
    </div>

    <!-- TABLA 1: Metas Formación Profesional Integral (Centro) -->
    <div class="card mb-3">
        <div class="card-header bg-light" style="cursor: pointer;" (click)="toggleTabla('formacion')">
        <div class="d-flex justify-content-between align-items-center" [ngClass]="{'table-header-row': tablasExpandidas['formacion']}">
            <div [ngClass]="tablasExpandidas['formacion'] ? 'col-header-concepto' : 'flex-grow-1'">
            <h6 class="mb-0">Metas Formación Profesional Integral</h6>
            </div>
            <div class="col-header-meta text-right" *ngIf="tablasExpandidas['formacion']">
            <h6 class="mb-0">Meta</h6>
            </div>
            <div class="col-header-ejecucion text-right" *ngIf="tablasExpandidas['formacion']">
            <h6 class="mb-0">Ejecución</h6>
            </div>
            <div class="col-header-porcentaje text-right" *ngIf="tablasExpandidas['formacion']">
            <h6 class="mb-0">% Ejecución</h6>
            </div>
            <div class="col-header-chevron">
            <i class="fas" [ngClass]="tablasExpandidas['formacion'] ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
            </div>
        </div>
        </div>
        <div class="card-body p-0" *ngIf="tablasExpandidas['formacion']">
        <div class="table-responsive">
            <table class="table table-sm table-hover mb-0">
            <tbody>
                <tr *ngIf="datosCentro.length === 0">
                <td colspan="4" class="text-center text-muted py-4">
                    <i class="fas fa-info-circle"></i>
                    Seleccione un centro para ver sus datos
                </td>
                </tr>
                <tr *ngFor="let item of datosCentro"
                    [class.fila-subtotal]="item.esSubtotal"
                    [class.fila-total]="item.esTotal">
                <td [style.padding-left]="item.indentacion">{{ item.subcategoria }}</td>
                <td class="text-right">{{ item.cupos | number }}</td>
                <td class="text-right">{{ item.ejecucion | number }}</td>
                <td class="text-right">
                    <span class="badge" [ngClass]="getBadgeClass(item.porcentaje)">
                    {{ item.porcentaje | number:'1.2-2' }}%
                    </span>
                </td>
                </tr>
            </tbody>
            </table>
        </div>
        </div>
    </div>

    <!-- TABLA 2: Metas Programas Relevantes (Centro) -->
    <div class="card mb-3">
        <div class="card-header bg-light" style="cursor: pointer;" (click)="toggleTabla('programas')">
        <div class="d-flex justify-content-between align-items-center" [ngClass]="{'table-header-row': tablasExpandidas['programas']}">
            <div [ngClass]="tablasExpandidas['programas'] ? 'col-header-concepto' : 'flex-grow-1'">
            <h6 class="mb-0">Metas Programas Relevantes</h6>
            </div>
            <div class="col-header-meta text-right" *ngIf="tablasExpandidas['programas']">
            <h6 class="mb-0">Meta</h6>
            </div>
            <div class="col-header-ejecucion text-right" *ngIf="tablasExpandidas['programas']">
            <h6 class="mb-0">Ejecución</h6>
            </div>
            <div class="col-header-porcentaje text-right" *ngIf="tablasExpandidas['programas']">
            <h6 class="mb-0">% Ejecución</h6>
            </div>
            <div class="col-header-chevron">
            <i class="fas" [ngClass]="tablasExpandidas['programas'] ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
            </div>
        </div>
        </div>
        <div class="card-body p-0" *ngIf="tablasExpandidas['programas']">
        <div class="table-responsive">
            <table class="table table-sm table-hover mb-0">
            <tbody>
                <tr *ngFor="let item of datosProgramasRelevantes">
                <td>{{ item.concepto }}</td>
                <td class="text-right">{{ item.meta | number }}</td>
                <td class="text-right">{{ item.ejecucion | number }}</td>
                <td class="text-right">
                    <span class="badge" [ngClass]="getBadgeClass(item.porcentaje)">
                    {{ item.porcentaje | number:'1.2-2' }}%
                    </span>
                </td>
                </tr>
            </tbody>
            </table>
        </div>
        </div>
    </div>

    <!-- TABLA 3: RETENCIÓN (Centro) -->
    <div class="card mb-3">
        <div class="card-header bg-light" style="cursor: pointer;" (click)="toggleTabla('retencion')">
        <div class="d-flex justify-content-between align-items-center" [ngClass]="{'table-header-row': tablasExpandidas['retencion']}">
            <div [ngClass]="tablasExpandidas['retencion'] ? 'col-header-concepto' : 'flex-grow-1'">
            <h6 class="mb-0">RETENCIÓN</h6>
            </div>
            <div class="col-header-meta text-right" *ngIf="tablasExpandidas['retencion']">
            <h6 class="mb-0">Meta</h6>
            </div>
            <div class="col-header-ejecucion text-right" *ngIf="tablasExpandidas['retencion']">
            <h6 class="mb-0">Ejecución</h6>
            </div>
            <div class="col-header-porcentaje text-right" *ngIf="tablasExpandidas['retencion']">
            <h6 class="mb-0">% Ejecución</h6>
            </div>
            <div class="col-header-chevron">
            <i class="fas" [ngClass]="tablasExpandidas['retencion'] ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
            </div>
        </div>
        </div>
        <div class="card-body p-0" *ngIf="tablasExpandidas['retencion']">
        <div class="table-responsive">
            <table class="table table-sm table-hover mb-0">
            <tbody>
                <tr *ngFor="let item of datosRetencion">
                <td>{{ item.concepto }}</td>
                <td class="text-right">{{ item.meta }}</td>
                <td class="text-right">{{ item.ejecucion }}</td>
                <td class="text-right">
                    <span class="badge" [ngClass]="getBadgeClass(item.porcentaje)">
                    {{ item.porcentaje | number:'1.2-2' }}%
                    </span>
                </td>
                </tr>
            </tbody>
            </table>
        </div>
        </div>
    </div>

    <!-- TABLA 4: CERTIFICACIÓN FORMACIÓN PROFESIONAL (Centro) -->
    <div class="card mb-3">
        <div class="card-header bg-light" style="cursor: pointer;" (click)="toggleTabla('certificacion')">
        <div class="d-flex justify-content-between align-items-center" [ngClass]="{'table-header-row': tablasExpandidas['certificacion']}">
            <div [ngClass]="tablasExpandidas['certificacion'] ? 'col-header-concepto' : 'flex-grow-1'">
            <h6 class="mb-0">CERTIFICACIÓN FORMACIÓN PROFESIONAL</h6>
            </div>
            <div class="col-header-meta text-right" *ngIf="tablasExpandidas['certificacion']">
            <h6 class="mb-0">Meta</h6>
            </div>
            <div class="col-header-ejecucion text-right" *ngIf="tablasExpandidas['certificacion']">
            <h6 class="mb-0">Ejecución</h6>
            </div>
            <div class="col-header-porcentaje text-right" *ngIf="tablasExpandidas['certificacion']">
            <h6 class="mb-0">% Ejecución</h6>
            </div>
            <div class="col-header-chevron">
            <i class="fas" [ngClass]="tablasExpandidas['certificacion'] ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
            </div>
        </div>
        </div>
        <div class="card-body p-0" *ngIf="tablasExpandidas['certificacion']">
        <div class="table-responsive">
            <table class="table table-sm table-hover mb-0">
            <tbody>
                <tr *ngFor="let item of datosCertificacion">
                <td>{{ item.concepto }}</td>
                <td class="text-right">{{ item.meta | number }}</td>
                <td class="text-right">{{ item.ejecucion | number }}</td>
                <td class="text-right">
                    <span class="badge" [ngClass]="getBadgeClass(item.porcentaje)">
                    {{ item.porcentaje | number:'1.2-2' }}%
                    </span>
                </td>
                </tr>
            </tbody>
            </table>
        </div>
        </div>
    </div>

    <!-- TABLA 5: Certificación de Competencias Laborales (Centro) -->
    <div class="card mb-3">
        <div class="card-header bg-light" style="cursor: pointer;" (click)="toggleTabla('competencias')">
        <div class="d-flex justify-content-between align-items-center" [ngClass]="{'table-header-row': tablasExpandidas['competencias']}">
            <div [ngClass]="tablasExpandidas['competencias'] ? 'col-header-concepto' : 'flex-grow-1'">
            <h6 class="mb-0">Certificación de Competencias Laborales</h6>
            </div>
            <div class="col-header-meta text-right" *ngIf="tablasExpandidas['competencias']">
            <h6 class="mb-0">Meta</h6>
            </div>
            <div class="col-header-ejecucion text-right" *ngIf="tablasExpandidas['competencias']">
            <h6 class="mb-0">Ejecución</h6>
            </div>
            <div class="col-header-porcentaje text-right" *ngIf="tablasExpandidas['competencias']">
            <h6 class="mb-0">% Ejecución</h6>
            </div>
            <div class="col-header-chevron">
            <i class="fas" [ngClass]="tablasExpandidas['competencias'] ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
            </div>
        </div>
        </div>
        <div class="card-body p-0" *ngIf="tablasExpandidas['competencias']">
        <div class="table-responsive">
            <table class="table table-sm table-hover mb-0">
            <tbody>
                <tr *ngFor="let item of datosCompetenciasLaborales">
                <td>{{ item.concepto }}</td>
                <td class="text-right">{{ item.meta | number }}</td>
                <td class="text-right">{{ item.ejecucion | number }}</td>
                <td class="text-right">
                    <span class="badge" [ngClass]="getBadgeClass(item.porcentaje)">
                    {{ item.porcentaje | number:'1.2-2' }}%
                    </span>
                </td>
                </tr>
            </tbody>
            </table>
        </div>
        </div>
    </div>

    <!-- TABLA 6: POBLACIONES VULNERABLES (Centro) -->
    <div class="card mb-3">
        <div class="card-header bg-light" style="cursor: pointer;" (click)="toggleTabla('poblaciones')">
        <div class="d-flex justify-content-between align-items-center" [ngClass]="{'table-header-row': tablasExpandidas['poblaciones']}">
            <div [ngClass]="tablasExpandidas['poblaciones'] ? 'col-header-concepto' : 'flex-grow-1'">
            <h6 class="mb-0">POBLACIONES VULNERABLES</h6>
            </div>
            <div class="col-header-meta text-right" *ngIf="tablasExpandidas['poblaciones']">
            <h6 class="mb-0">Meta</h6>
            </div>
            <div class="col-header-ejecucion text-right" *ngIf="tablasExpandidas['poblaciones']">
            <h6 class="mb-0">Ejecución</h6>
            </div>
            <div class="col-header-porcentaje text-right" *ngIf="tablasExpandidas['poblaciones']">
            <h6 class="mb-0">% Ejecución</h6>
            </div>
            <div class="col-header-chevron">
            <i class="fas" [ngClass]="tablasExpandidas['poblaciones'] ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
            </div>
        </div>
        </div>
        <div class="card-body p-0" *ngIf="tablasExpandidas['poblaciones']">
        <div class="table-responsive">
            <table class="table table-sm table-hover mb-0">
            <tbody>
                <tr *ngFor="let item of datosPoblacionesVulnerables">
                <td>{{ item.concepto }}</td>
                <td class="text-right">{{ item.meta | number }}</td>
                <td class="text-right">{{ item.ejecucion | number }}</td>
                <td class="text-right">
                    <span class="badge" [ngClass]="getBadgeClass(item.porcentaje)">
                    {{ item.porcentaje | number:'1.2-2' }}%
                    </span>
                </td>
                </tr>
            </tbody>
            </table>
        </div>
        </div>
    </div>

    <!-- TABLA 7: Desagregación OTRAS POBLACIONES VULNERABLES (Centro) -->
    <div class="card mb-3">
        <div class="card-header bg-light" style="cursor: pointer;" (click)="toggleTabla('otrasPoblaciones')">
        <div class="d-flex justify-content-between align-items-center" [ngClass]="{'table-header-row': tablasExpandidas['otrasPoblaciones']}">
            <div [ngClass]="tablasExpandidas['otrasPoblaciones'] ? 'col-header-concepto' : 'flex-grow-1'">
            <h6 class="mb-0">Desagregación OTRAS POBLACIONES VULNERABLES</h6>
            </div>
            <div class="col-header-meta text-right" *ngIf="tablasExpandidas['otrasPoblaciones']">
            <h6 class="mb-0">Meta</h6>
            </div>
            <div class="col-header-ejecucion text-right" *ngIf="tablasExpandidas['otrasPoblaciones']">
            <h6 class="mb-0">Ejecución</h6>
            </div>
            <div class="col-header-porcentaje text-right" *ngIf="tablasExpandidas['otrasPoblaciones']">
            <h6 class="mb-0">% Ejecución</h6>
            </div>
            <div class="col-header-chevron">
            <i class="fas" [ngClass]="tablasExpandidas['otrasPoblaciones'] ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
            </div>
        </div>
        </div>
        <div class="card-body p-0" *ngIf="tablasExpandidas['otrasPoblaciones']">
        <div class="table-responsive">
            <table class="table table-sm table-hover mb-0">
            <tbody>
                <tr *ngFor="let item of datosOtrasPoblaciones">
                <td>{{ item.concepto }}</td>
                <td class="text-right">{{ item.meta | number }}</td>
                <td class="text-right">{{ item.ejecucion | number }}</td>
                <td class="text-right">
                    <span class="badge" [ngClass]="getBadgeClass(item.porcentaje)">
                    {{ item.porcentaje | number:'1.2-2' }}%
                    </span>
                </td>
                </tr>
            </tbody>
            </table>
        </div>
        </div>
    </div>

    <!-- TABLA 8: AGENCIA PUBLICA DE EMPLEO (Centro) -->
    <div class="card mb-3">
        <div class="card-header bg-light" style="cursor: pointer;" (click)="toggleTabla('agencia')">
        <div class="d-flex justify-content-between align-items-center" [ngClass]="{'table-header-row': tablasExpandidas['agencia']}">
            <div [ngClass]="tablasExpandidas['agencia'] ? 'col-header-concepto' : 'flex-grow-1'">
            <h6 class="mb-0">AGENCIA PUBLICA DE EMPLEO</h6>
            </div>
            <div class="col-header-meta text-right" *ngIf="tablasExpandidas['agencia']">
            <h6 class="mb-0">Meta</h6>
            </div>
            <div class="col-header-ejecucion text-right" *ngIf="tablasExpandidas['agencia']">
            <h6 class="mb-0">Ejecución</h6>
            </div>
            <div class="col-header-porcentaje text-right" *ngIf="tablasExpandidas['agencia']">
            <h6 class="mb-0">% Ejecución</h6>
            </div>
            <div class="col-header-chevron">
            <i class="fas" [ngClass]="tablasExpandidas['agencia'] ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
            </div>
        </div>
        </div>
        <div class="card-body p-0" *ngIf="tablasExpandidas['agencia']">
        <div class="table-responsive">
            <table class="table table-sm table-hover mb-0">
            <tbody>
                <tr *ngFor="let item of datosAgenciaEmpleo">
                <td>{{ item.concepto }}</td>
                <td class="text-right">{{ item.meta | number }}</td>
                <td class="text-right">{{ item.ejecucion | number }}</td>
                <td class="text-right">
                    <span class="badge" [ngClass]="getBadgeClass(item.porcentaje)">
                    {{ item.porcentaje | number:'1.2-2' }}%
                    </span>
                </td>
                </tr>
            </tbody>
            </table>
        </div>
        </div>
    </div>

    <!-- TABLA 9: EMPRENDIMIENTO Y FORTALECIMIENTO (Centro) -->
    <div class="card mb-3">
        <div class="card-header bg-light" style="cursor: pointer;" (click)="toggleTabla('emprendimiento')">
        <div class="d-flex justify-content-between align-items-center" [ngClass]="{'table-header-row': tablasExpandidas['emprendimiento']}">
            <div [ngClass]="tablasExpandidas['emprendimiento'] ? 'col-header-concepto' : 'flex-grow-1'">
            <h6 class="mb-0">EMPRENDIMIENTO Y FORTALECIMIENTO</h6>
            </div>
            <div class="col-header-meta text-right" *ngIf="tablasExpandidas['emprendimiento']">
            <h6 class="mb-0">Meta</h6>
            </div>
            <div class="col-header-ejecucion text-right" *ngIf="tablasExpandidas['emprendimiento']">
            <h6 class="mb-0">Ejecución</h6>
            </div>
            <div class="col-header-porcentaje text-right" *ngIf="tablasExpandidas['emprendimiento']">
            <h6 class="mb-0">% Ejecución</h6>
            </div>
            <div class="col-header-chevron">
            <i class="fas" [ngClass]="tablasExpandidas['emprendimiento'] ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
            </div>
        </div>
        </div>
        <div class="card-body p-0" *ngIf="tablasExpandidas['emprendimiento']">
        <div class="table-responsive">
            <table class="table table-sm table-hover mb-0">
            <tbody>
                <tr *ngFor="let item of datosEmprendimiento">
                <td>{{ item.concepto }}</td>
                <td class="text-right">{{ item.meta | number }}</td>
                <td class="text-right">{{ item.ejecucion | number }}</td>
                <td class="text-right">
                    <span class="badge" [ngClass]="getBadgeClass(item.porcentaje)">
                    {{ item.porcentaje | number:'1.2-2' }}%
                    </span>
                </td>
                </tr>
            </tbody>
            </table>
        </div>
        </div>
    </div>

    <!-- TABLA 10: CONTRATOS DE APRENDIZAJE (Centro) -->
    <div class="card mb-3">
        <div class="card-header bg-light" style="cursor: pointer;" (click)="toggleTabla('contratos')">
        <div class="d-flex justify-content-between align-items-center" [ngClass]="{'table-header-row': tablasExpandidas['contratos']}">
            <div [ngClass]="tablasExpandidas['contratos'] ? 'col-header-concepto' : 'flex-grow-1'">
            <h6 class="mb-0">CONTRATOS DE APRENDIZAJE</h6>
            </div>
            <div class="col-header-meta text-right" *ngIf="tablasExpandidas['contratos']">
            <h6 class="mb-0">Meta</h6>
            </div>
            <div class="col-header-ejecucion text-right" *ngIf="tablasExpandidas['contratos']">
            <h6 class="mb-0">Ejecución</h6>
            </div>
            <div class="col-header-porcentaje text-right" *ngIf="tablasExpandidas['contratos']">
            <h6 class="mb-0">% Ejecución</h6>
            </div>
            <div class="col-header-chevron">
            <i class="fas" [ngClass]="tablasExpandidas['contratos'] ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
            </div>
        </div>
        </div>
        <div class="card-body p-0" *ngIf="tablasExpandidas['contratos']">
        <div class="table-responsive">
            <table class="table table-sm table-hover mb-0">
            <tbody>
                <tr *ngFor="let item of datosContratosAprendizaje">
                <td>{{ item.concepto }}</td>
                <td class="text-right">{{ item.meta | number }}</td>
                <td class="text-right">{{ item.ejecucion | number }}</td>
                <td class="text-right">
                    <span class="badge" [ngClass]="getBadgeClass(item.porcentaje)">
                    {{ item.porcentaje | number:'1.2-2' }}%
                    </span>
                </td>
                </tr>
            </tbody>
            </table>
        </div>
        </div>
    </div>

    <!-- TABLA 11: CAMPESENA (Centro) -->
    <div class="card mb-3">
        <div class="card-header bg-light" style="cursor: pointer;" (click)="toggleTabla('campesena')">
        <div class="d-flex justify-content-between align-items-center" [ngClass]="{'table-header-row': tablasExpandidas['campesena']}">
            <div [ngClass]="tablasExpandidas['campesena'] ? 'col-header-concepto' : 'flex-grow-1'">
            <h6 class="mb-0">CAMPESENA</h6>
            </div>
            <div class="col-header-meta text-right" *ngIf="tablasExpandidas['campesena']">
            <h6 class="mb-0">Meta</h6>
            </div>
            <div class="col-header-ejecucion text-right" *ngIf="tablasExpandidas['campesena']">
            <h6 class="mb-0">Ejecución</h6>
            </div>
            <div class="col-header-porcentaje text-right" *ngIf="tablasExpandidas['campesena']">
            <h6 class="mb-0">% Ejecución</h6>
            </div>
            <div class="col-header-chevron">
            <i class="fas" [ngClass]="tablasExpandidas['campesena'] ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
            </div>
        </div>
        </div>
        <div class="card-body p-0" *ngIf="tablasExpandidas['campesena']">
        <div class="table-responsive">
            <table class="table table-sm table-hover mb-0">
            <tbody>
                <tr *ngFor="let item of datosCampesena">
                <td>{{ item.concepto }}</td>
                <td class="text-right">{{ item.meta | number }}</td>
                <td class="text-right">{{ item.ejecucion | number }}</td>
                <td class="text-right">
                    <span class="badge" [ngClass]="getBadgeClass(item.porcentaje)">
                    {{ item.porcentaje | number:'1.2-2' }}%
                    </span>
                </td>
                </tr>
            </tbody>
            </table>
        </div>
        </div>
    </div>

    <!-- TABLA 12: FULL POPULAR (Centro) -->
    <div class="card mb-3">
        <div class="card-header bg-light" style="cursor: pointer;" (click)="toggleTabla('fullPopular')">
        <div class="d-flex justify-content-between align-items-center" [ngClass]="{'table-header-row': tablasExpandidas['fullPopular']}">
            <div [ngClass]="tablasExpandidas['fullPopular'] ? 'col-header-concepto' : 'flex-grow-1'">
            <h6 class="mb-0">FULL POPULAR</h6>
            </div>
            <div class="col-header-meta text-right" *ngIf="tablasExpandidas['fullPopular']">
            <h6 class="mb-0">Meta</h6>
            </div>
            <div class="col-header-ejecucion text-right" *ngIf="tablasExpandidas['fullPopular']">
            <h6 class="mb-0">Ejecución</h6>
            </div>
            <div class="col-header-porcentaje text-right" *ngIf="tablasExpandidas['fullPopular']">
            <h6 class="mb-0">% Ejecución</h6>
            </div>
            <div class="col-header-chevron">
            <i class="fas" [ngClass]="tablasExpandidas['fullPopular'] ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
            </div>
        </div>
        </div>
        <div class="card-body p-0" *ngIf="tablasExpandidas['fullPopular']">
        <div class="table-responsive">
            <table class="table table-sm table-hover mb-0">
            <tbody>
                <tr *ngFor="let item of datosFullPopular">
                <td>{{ item.concepto }}</td>
                <td class="text-right">{{ item.meta | number }}</td>
                <td class="text-right">{{ item.ejecucion | number }}</td>
                <td class="text-right">
                    <span class="badge" [ngClass]="getBadgeClass(item.porcentaje)">
                    {{ item.porcentaje | number:'1.2-2' }}%
                    </span>
                </td>
                </tr>
            </tbody>
            </table>
        </div>
        </div>
    </div>

    <!-- TABLA 13: Estrategia Formación Continua Especial Campesina (FEEC) (Centro) -->
    <div class="card mb-3">
        <div class="card-header bg-light" style="cursor: pointer;" (click)="toggleTabla('feec')">
        <div class="d-flex justify-content-between align-items-center" [ngClass]="{'table-header-row': tablasExpandidas['feec']}">
            <div [ngClass]="tablasExpandidas['feec'] ? 'col-header-concepto' : 'flex-grow-1'">
            <h6 class="mb-0">Estrategia FEEC</h6>
            </div>
            <div class="col-header-meta text-right" *ngIf="tablasExpandidas['feec']">
            <h6 class="mb-0">Meta</h6>
            </div>
            <div class="col-header-ejecucion text-right" *ngIf="tablasExpandidas['feec']">
            <h6 class="mb-0">Ejecución</h6>
            </div>
            <div class="col-header-porcentaje text-right" *ngIf="tablasExpandidas['feec']">
            <h6 class="mb-0">% Ejecución</h6>
            </div>
            <div class="col-header-chevron">
            <i class="fas" [ngClass]="tablasExpandidas['feec'] ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
            </div>
        </div>
        </div>
        <div class="card-body p-0" *ngIf="tablasExpandidas['feec']">
        <div class="table-responsive">
            <table class="table table-sm table-hover mb-0">
            <tbody>
                <tr *ngFor="let item of datosFeec">
                <td>{{ item.concepto }}</td>
                <td class="text-right">{{ item.meta | number }}</td>
                <td class="text-right">{{ item.ejecucion | number }}</td>
                <td class="text-right">
                    <span class="badge" [ngClass]="getBadgeClass(item.porcentaje)">
                    {{ item.porcentaje | number:'1.2-2' }}%
                    </span>
                </td>
                </tr>
            </tbody>
            </table>
        </div>
        </div>
    </div>

    <!-- TABLA 14: Metas Primer Curso (Centro) -->
    <div class="card mb-3">
        <div class="card-header bg-light" style="cursor: pointer;" (click)="toggleTabla('primerCurso')">
        <div class="d-flex justify-content-between align-items-center" [ngClass]="{'table-header-row': tablasExpandidas['primerCurso']}">
            <div [ngClass]="tablasExpandidas['primerCurso'] ? 'col-header-concepto' : 'flex-grow-1'">
            <h6 class="mb-0">Metas Primer Curso</h6>
            </div>
            <div class="col-header-meta text-right" *ngIf="tablasExpandidas['primerCurso']">
            <h6 class="mb-0">Meta</h6>
            </div>
            <div class="col-header-ejecucion text-right" *ngIf="tablasExpandidas['primerCurso']">
            <h6 class="mb-0">Ejecución</h6>
            </div>
            <div class="col-header-porcentaje text-right" *ngIf="tablasExpandidas['primerCurso']">
            <h6 class="mb-0">% Ejecución</h6>
            </div>
            <div class="col-header-chevron">
            <i class="fas" [ngClass]="tablasExpandidas['primerCurso'] ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
            </div>
        </div>
        </div>
        <div class="card-body p-0" *ngIf="tablasExpandidas['primerCurso']">
        <div class="table-responsive">
            <table class="table table-sm table-hover mb-0">
            <tbody>
                <tr *ngFor="let item of datosPrimerCurso">
                <td>{{ item.concepto }}</td>
                <td class="text-right">{{ item.meta | number }}</td>
                <td class="text-right">{{ item.ejecucion | number }}</td>
                <td class="text-right">
                    <span class="badge" [ngClass]="getBadgeClass(item.porcentaje)">
                    {{ item.porcentaje | number:'1.2-2' }}%
                    </span>
                </td>
                </tr>
            </tbody>
            </table>
        </div>
        </div>
    </div>
    </div>
</div>

<!-- Loading -->
<div *ngIf="cargando" class="text-center mt-3">
    <div class="spinner"></div>
    <p>Cargando datos...</p>
</div>